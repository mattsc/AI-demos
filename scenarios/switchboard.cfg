#textdomain wesnoth-AI-demos

[scenario]
    id=aid_switchboard
    name= _ "AI-demos Switchboard"
    next_scenario=null

    map_data="{multiplayer/maps/Dark_Forecast.map}"

    {DEFAULT_SCHEDULE}
    turns=-1
    victory_when_enemies_defeated=no

    [story]
        [part]
            background=portraits/goblins/spearman.png
            story= _ "<span font='16'>Hi, I'm Grnk the Frail. You may remember me from such instructional campaigns as 'Grnk the Mighty' and 'Why You Shouldn't Attack Peasants When There's A Mad Goblin Around.' Today I am going to show you some examples how the Wesnoth AI can be modified.

Note that many of these AIs have made it into Wesnoth mainline by now. They remain in this campaign so that they are all collected in one place and to enable easy experimenting with them, but you might not need to include this add-on in order to have them available to you.

If you have comments, problems, suggestions or requests for additional AI behaviors, please visit our thread on the <span color='#00A000'>Wesnoth forums</span> at http://tinyurl.com/AI-mods

Additional information is available under '<span color='#00A000'>Practical Guide to Modifying AI Behavior</span>' on the <span color='#00A000'>Wesnoth wiki</span>.</span>"
        [/part]
    [/story]

    [side]
        side=1
        controller=human
        id=Grnk
        name= _ "Grnk the Frail"
        gender=male
        unrenamable=yes
        type=Goblin Spearman
        max_moves=99
        x,y=13,15

        team_name=Grnk
        user_team_name= _ "team_name^Grnk"
        persistent=yes
        save_id=Grnk

        [modifications]
            {TRAIT_QUICK}
        [/modifications]

        village_gold=0
        {GOLD 24 22 19}
        income=-2  # No income whatsoever
    [/side]

    # The labels and signposts to go on to the next scenario
    [event]
        name=prestart

        {PLACE_IMAGE "scenery/signpost.png~GS()" 5 15}
        {SET_LABEL 5 15 _"<span color='#D0D0D0'>Prune Cart</span>"}

        {PLACE_IMAGE "scenery/signpost.png~GS()" 5 16}
        {SET_LABEL 5 16 _"<span color='#D0D0D0'>MP rushes</span>"}

        {PLACE_IMAGE "scenery/signpost.png~GS()" 5 17}
        {SET_LABEL 5 17 _"<span color='#D0D0D0'>Test Scenario</span>"}

        {PLACE_IMAGE "scenery/signpost.png~GS()" 7 12}
        {SET_LABEL 7 12 _"<span color='#D0D0D0'>Simple Lua AI Demo</span>"}

        #{PLACE_IMAGE "scenery/signpost.png~GS()" 1 10}
        #{SET_LABEL 4 10 _"<span color='#D0D0D0'>Formula AI Demo</span>"}

        {VARIABLE scenario_name aid_switchboard}

        [set_menu_item]
            id=m80_Lua_demo
            description= _ "Simple Lua AI Demo"
            image=units/orcs/grunt.png~CROP(23,15,24,24)
            [filter_location]
                x,y=7,12
            [/filter_location]
            [show_if]
                {VARIABLE_CONDITIONAL scenario_name equals aid_switchboard}
            [/show_if]
            [command]
                {MESSAGE Grnk "" _"Simple Lua AI Demo" _"This scenario provides a simple template for setting up a Lua AI engine and scenario. The AI behavior itself is trivial and not particularly useful (some of the AI units simply move toward two map locations, with priority either higher or lower than attacks on enemies), it is only meant as a demonstration how to code this."}
            [/command]
        [/set_menu_item]

        [set_menu_item]
            id=m90_cart
            description= _ "Prune Cart AI demo"
            image=units/orcs/grunt.png~CROP(23,15,24,24)
            [filter_location]
                x,y=5,15
            [/filter_location]
            [show_if]
                {VARIABLE_CONDITIONAL scenario_name equals aid_switchboard}
            [/show_if]
            [command]
                {MESSAGE Grnk "" _"Prune Cart AI Demo" _"This scenario features an orcish horde protecting a cart with magical prunes from an undead army, while the cart (slowly) makes its way through a mountainous area."}
            [/command]
        [/set_menu_item]

        [set_menu_item]
            id=m91_rushes
            description= _ "MP Rush AIs (Lua AI)"
            image=units/orcs/grunt.png~CROP(23,15,24,24)
            [filter_location]
                x,y=5,16
            [/filter_location]
            [show_if]
                {VARIABLE_CONDITIONAL scenario_name equals aid_switchboard}
            [/show_if]
            [command]
                {MESSAGE Grnk "" _"MP rush AIs" _"Story only scenario that explains how to use the multiplayer rush AIs."}
            [/command]
        [/set_menu_item]

        [set_menu_item]
            id=m92_test
            description= _ "Lua AI Test Scenario"
            image=units/orcs/grunt.png~CROP(23,15,24,24)
            [filter_location]
                x,y=5,17
            [/filter_location]
            [show_if]
                {VARIABLE_CONDITIONAL scenario_name equals aid_switchboard}
            [/show_if]
            [command]
                {MESSAGE Grnk "" _"Lua AI Test Scenario" _"This is a hard-core test scenario that is here for manual testing of AI functions or candidate actions. It provides a right-click menu option for doing so without having to reload.

It can also be started from the commandline as a test scenario with 'Wesnoth -d -t aid_test'."}
            [/command]
        [/set_menu_item]

        [set_menu_item]
            id=m94_fai
            description= _ "Formula AI demo"  # Not included yet
            image=units/elves-wood/avenger.png~CROP(25,11,24,24)
            [filter_location]
                x,y=0,0
            [/filter_location]
            [show_if]
                {VARIABLE_CONDITIONAL scenario_name equals aid_switchboard}
            [/show_if]
            [command]
                {MESSAGE Grnk "" _"Formula AI Demo" _"This scenario contains a simple demonstration of setting up a full AI using Formula AI."}
            [/command]
        [/set_menu_item]
    [/event]

    [event]
        name=start

        {SCROLL_TO 13 18}

        {MESSAGE Grnk "" "" _"Move me to any of the signposts to go to an AI demonstration. Brown signpost with blue labels are Micro AIs from mainline (see <span color='#00A000'>http://wiki.wesnoth.org/Micro_AIs</span> on the Wesnoth wiki). Gray signposts with white labels designate AIs under development that are only available in this add-on.

Information about each demonstration can be accessed by right-clicking on the respective signpost.

<span color='#A00000'>Note:</span> As this add-on keeps up with the current AI development, some of the (brown signpost) AIs require the trunk version of Wesnoth in order to work (as opposed to the last development release). If you encounter a problem with a scenario, start it as a test scenario from the command line instead, which uses the AI version appropriate for your Wesnoth version. See the link above for instructions how to do that."}

        [objectives]
            [objective]
                description= _ "Move Grnk to one of the signposts"
                condition=win
            [/objective]
            [note]
                description= _ "Right-click on a signpost to get information about the scenario"
            [/note]
        [/objectives]
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=7,12
        [/filter]

        [endlevel]
            result=victory
            next_scenario=luaai-demo
            bonus=no
            carryover_percentage=0
            carryover_report=no
            linger_mode=no
            replay_save=no
        [/endlevel]
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=5,15
        [/filter]

        [endlevel]
            result=victory
            next_scenario=prune_cart
            bonus=no
            carryover_percentage=0
            carryover_report=no
            linger_mode=no
            replay_save=no
        [/endlevel]
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=5,16
        [/filter]

        [endlevel]
            result=victory
            next_scenario=rushes
            bonus=no
            carryover_percentage=0
            carryover_report=no
            linger_mode=no
            replay_save=no
        [/endlevel]
    [/event]

    [event]
        name=moveto
        [filter]
            x,y=5,17
        [/filter]

        [endlevel]
            result=victory
            next_scenario=aid_test
            bonus=no
            carryover_percentage=0
            carryover_report=no
            linger_mode=no
            replay_save=no
        [/endlevel]
    [/event]

    [event]
        name=moveto2
        [filter]
            x,y=0,0
        [/filter]

        [endlevel]
            result=victory
            next_scenario=fai_demo
            bonus=no
            carryover_percentage=0
            carryover_report=no
            linger_mode=no
            replay_save=no
        [/endlevel]
    [/event]
[/scenario]
